ssc-client-go:
  build:
    image: splunk/ssc-client-go
    dockerfile: ci/Dockerfile

ssc-sdk-shared-tenant-creation:
  image: 137462835382.dkr.ecr.us-west-1.amazonaws.com/ssc-sdk-shared-tenant-creation:temporary
  dockercfg_service: aws-generator
  encrypted_env_file: ci/env.encrypted
  volumes_from:
    - ssc-sdk-shared-token-fetcher
  depends_on:
    - ssc-sdk-shared-token-fetcher
  volumes:
    - ./.config/ssc:/ssc

ssc-sdk-shared-token-fetcher:
  image: 137462835382.dkr.ecr.us-west-1.amazonaws.com/ssc-sdk-shared-token-fetcher:latest
  dockercfg_service: aws-generator
  encrypted_env_file: ci/env.encrypted
  volumes:
    - ./.config/okta:/okta

ssc-client-go-with-stubby:
  build:
    image: splunk/ssc-client-go-with-stubby
    dockerfile: ci/Dockerfile
  encrypted_env_file: ci/env.encrypted
  depends_on:
    - ssc-sdk-shared-stubby

ssc-client-go-against-playground:
  build:
    image: splunk/ssc-client-go-against-playground
    dockerfile: ci/Dockerfile
  encrypted_env_file: ci/env.encrypted
  volumes_from:
    - ssc-sdk-shared-token-fetcher
    - ssc-sdk-shared-tenant-creation
  depends_on:
    - ssc-sdk-shared-token-fetcher
    - ssc-sdk-shared-tenant-creation

ssc-sdk-shared-stubby:
  image: 137462835382.dkr.ecr.us-west-1.amazonaws.com/ssc-sdk-shared-stubby:latest
  dockercfg_service: aws-generator

aws-generator:
  add_docker: true
  image: codeship/aws-ecr-dockercfg-generator
  encrypted_env_file: ci/shared/env.encrypted