- type: parallel
  steps:
 
  - type: parallel
    steps:
      - name: lint
        service: ssc-client-go
        command: bash -c "make lint"
      - name: vet
        service: ssc-client-go
        command: bash -c "make vet"
      - name: build
        service: ssc-client-go
        command: bash -c "make build"

  - type: parallel
    steps:
      - name: test
        service: ssc-client-go-with-stubby
        command: bash -c "source ci/runtests"

  - type: parallel
    steps:
      - name: integration tests - not gated
        service: ssc-client-go-against-playground
        exclude: ^(master|develop)$
        command: bash -c "allow_failures=1 ./ci/integration/runtests.sh"
      - name: integration tests - gated
        service: ssc-client-go-against-playground
        tag: ^(master|develop)$
        command: bash -c "allow_failures=0 ./ci/integration/runtests.sh"